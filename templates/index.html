{% block content %}
{% include 'header_test.html' %}

<section id="hero" class="hero d-flex align-items-center justify-content-center">
  <div class="container text-center" style="animation: slideUp 1s ease-out;">
    <div class="row justify-content-center">
      <div class="col-12 col-md-10 col-lg-8">

        <!-- Title Section -->
        <h1 data-aos="fade-up">City Treasury Office</h1>
        <h2 data-aos="fade-up" data-aos-delay="400">Automated Inventory Monitoring System (AIMS)</h2>

        <!-- Form Card -->
        <div class="card border-secondary rounded radius-10 mt-4 mx-auto w-100" style="max-width: 500px;">
          <div class="card-header navbar-brand text-center" style="color: #212529">
            <h5><i class="bi bi-basket3-fill"></i><strong> Request Item</strong></h5>
          </div>
          <form method="POST" id="IssueForm" action="{{ url_for('issue_item') }}" enctype="multipart/form-data">
            <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
            <div class="p-3 border border-white border-3 rounded">

              <h5 class="text-start" style="color: #fca650">Details</h5>

              {% for field in form %}
                {% if field.name == 'employee' %}
                <div class="form-floating mb-3">
                  {{ field(class="form-select", id="Recipient") }}
                  <label for="Recipient">Recipient</label>
                  {% for error in form.employee.errors %}
                    <p class="error" style="color: red;">{{ error }}</p>
                  {% endfor %}
                </div>
                {% elif field.name == 'item' %}
                <div class="form-floating mb-3">
                  {{ field(class="form-select", id="Item") }}
                  <label for="Item">Item</label>
                  {% for error in form.item.errors %}
                    <p class="error" style="color: red;">{{ error }}</p>
                  {% endfor %}
                </div>
                {% elif field.name == 'quantity' %}
                <div class="form-floating mb-3">
                  <input class="form-control" id="Quan" type="number" placeholder="Quantity" name="{{ field.name }}" required min="1">
                  <label for="Quan">Quantity</label>
                  {% for error in form.quantity.errors %}
                    <p class="error" style="color: red;">{{ error }}</p>
                  {% endfor %}
                </div>
                {% endif %}
              {% endfor %}

              <div class="text-center">
                <button type="submit" class="btn btn-warning w-100">Send Request</button>
              </div>

              <!-- Flash Messages -->
              {% with messages = get_flashed_messages() %}
                {% if messages %}
                  {% for message in messages %}
                  <div class="mt-3">
                    <p id="messageText" style="color: red;">{{ message }}</p>
                  </div>
                  {% endfor %}
                {% endif %}
              {% endwith %}

            </div>
          </form>
        </div>

      </div>
    </div>
  </div>
</section>

{% include "footer.html" %}
{% endblock %}
